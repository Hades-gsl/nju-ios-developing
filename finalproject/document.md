# 项目文档

说明：在写这个作业之前，没有仔细阅读要求，所以使用了 `pytesseract` 这一 `OCR` 库来进行的数字和符号的识别，写完后才看到要求自己训练，但因时间原因，只能这样了。

## 1.思路

### 1.1 识别部分

使用 `opencv` 库进行边缘检测，根据结果划分出相应的矩阵，之后将每个矩阵划分为小的方格，然后使用方格进行数字和符号的识别。

> 为什么不直接进行 `OCR` ？答案是，我也想，但是由于 `tesseract` 不是很行，无法识别，
> 即使是划分之后，依然有概率无法识别。

在本项目中，对于每个pdf只识别它的第一个矩阵的问题和答案。

### 1.2 总体

在 `Calcudoku Collection App` 的基础上进行的改动（所以名字为`Calcudoku Collection App`），之前的最后一级为展示pdf，现在将这一级改为加载界面，后面新增
一个游戏界面，本界面负责将信息传送至服务器，以及接收服务器的消息。

服务器端负责进行识别相关的处理，首先下载pdf，接着进行识别，之后将识别的结果返还给客户端。

## 2、运行

首先要运行 `py` 文件夹下的 `main.py` 文件，接着就可以运行 `swift` 程序了。

可选：在[这里](py/main.py#L15)可以修改服务器的IP地址和端口号，对应的，客户端在[这里](Calcudoku%20Collection%20App/Calcudoku%20Collection%20App/WebViewController.swift#L56)

注意：要运行 `main.py` 文件，需要首先下载 [`tesseract`](https://tesseract-ocr.github.io/tessdoc/Downloads.html)

## 3、录屏

<https://www.bilibili.com/video/BV1iW4y1c78w/>

视频经过了剪辑，实际运行较慢，且耗时占大头的部分不在识别，而在下载pdf，原因未知。

## 4、奇怪的问题

由于在同一个局域网内，刚开始我的服务端和客户端是分开在两台机器上的，但是运行过程中发现，两者的连接十分不稳定，且很难连接成功。
之后我又尝试了一边使用 `python3 -m http.server`开启端口，另一边使用 `wget` 进行文件传输，依旧很难连接成功，不知道是系统设置的问题还是网络的问题
（防火墙已关闭）。
